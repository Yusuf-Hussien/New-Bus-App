<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Primary SEO Meta Tags -->
    <title>NewBus - تطبيق حافلات جامعة الغردقة | نظام النقل الجامعي</title>
    <meta name="title" content="NewBus - تطبيق حافلات جامعة الغردقة | نظام النقل الجامعي" />
    <meta name="description" content="تطبيق NewBus - نظام النقل الرسمي لجامعة الغردقة. تتبع الحافلات، إدارة المسارات، والوصول إلى خدمات النقل في الوقت الفعلي في الغردقة." />
    <meta name="keywords" content="bus, hurghada, newbus, new bus, hurghada bus, hurghada university, hurghada bus transport, university bus, bus tracking, bus management, hurghada transportation, student bus, hurghada student transport, bus app, public transport hurghada, university transport system, حافلة, الغردقة, حافلة الغردقة, جامعة الغردقة, نقل طلاب, نظام النقل الجامعي" />
    <meta name="author" content="NewBus" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="Arabic" />
    <meta name="revisit-after" content="7 days" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://newbus.vercel.app/passenger" />
    <meta property="og:title" content="NewBus - تطبيق حافلات جامعة الغردقة | نظام النقل الجامعي" />
    <meta property="og:description" content="تطبيق NewBus - نظام النقل الرسمي لجامعة الغردقة. تتبع الحافلات، إدارة المسارات، والوصول إلى خدمات النقل في الوقت الفعلي في الغردقة." />
    <meta property="og:image" content="https://newbus.vercel.app/icons/icon-512x512.png" />
    <meta property="og:site_name" content="NewBus" />
    <meta property="og:locale" content="ar_EG" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://newbus.vercel.app/passenger" />
    <meta property="twitter:title" content="NewBus - تطبيق حافلات جامعة الغردقة | نظام النقل الجامعي" />
    <meta property="twitter:description" content="تطبيق NewBus - نظام النقل الرسمي لجامعة الغردقة. تتبع الحافلات، إدارة المسارات، والوصول إلى خدمات النقل في الوقت الفعلي في الغردقة." />
    <meta property="twitter:image" content="https://newbus.vercel.app/icons/icon-512x512.png" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://newbus.vercel.app/passenger" />
    
    <!-- Theme and PWA -->
    <meta name="theme-color" content="#4A90E2" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="NewBus" />
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "NewBus - تطبيق الركاب",
      "description": "نظام النقل بالحافلات لجامعة الغردقة - تتبع الحافلات، إدارة المسارات، والوصول إلى خدمات النقل في الوقت الفعلي",
      "url": "https://newbus.vercel.app/passenger",
      "applicationCategory": "TransportationApplication",
      "operatingSystem": "Web, iOS, Android",
      "inLanguage": "ar",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "EGP"
      },
      "keywords": "bus, hurghada, newbus, new bus, hurghada bus, hurghada university, hurghada bus transport, university bus, bus tracking, bus management, hurghada transportation, student bus, hurghada student transport, bus app, public transport hurghada, university transport system"
    }
    </script>
    <link rel="manifest" href="manifest.json" />
    <link rel="apple-touch-icon" href="icons/icon-192x192.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&display=swap" />
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <link rel="stylesheet" href="passenger/passenger.css">
       
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-bus"></i>
                    <span>NewBus - تطبيق الركاب</span>
                </div>

                <div class="user-info">
                    <div class="notification-icon" id="notificationToggle">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge" id="notificationCount">0</span>
                    </div>

                    <div class="user-profile" id="userProfile">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="user-name" id="userName">المستخدم</div>
                            <div class="user-type-badge">طالب</div>
                        </div>
                    </div>

                    <button class="logout-btn" onclick="handleLogout()">
                        <i class="fas fa-sign-out-alt"></i> تسجيل الخروج
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Notifications Panel -->
    <div class="notification-panel" id="notificationPanel">
        <div class="notification-header">
            <h3>إشعارات الحافلات</h3>
            <span id="closeNotifications" style="cursor: pointer; font-size: 1.2rem">✕</span>
        </div>
        <div class="notification-body" id="notificationList"></div>
    </div>

    <!-- Profile Modal -->
    <div class="modal-overlay" id="profileModal">
        <div class="modal">
            <div class="modal-header">
                <h3>تعديل الملف الشخصي</h3>
                <span id="closeProfileModal" style="cursor: pointer; font-size: 1.2rem">✕</span>
            </div>
            <div class="modal-body">
                <form id="profileForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>الاسم الأول</label>
                            <input type="text" class="form-control" id="firstName" required>
                        </div>
                        <div class="form-group">
                            <label>الاسم الثاني</label>
                            <input type="text" class="form-control" id="secondName">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>الاسم الثالث</label>
                            <input type="text" class="form-control" id="thirdName">
                        </div>
                        <div class="form-group">
                            <label>اسم العائلة</label>
                            <input type="text" class="form-control" id="lastName" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>البريد الإلكتروني</label>
                        <input type="email" class="form-control" id="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label>رقم الهاتف</label>
                        <input type="tel" class="form-control" id="phone">
                    </div>
                    
                    <div class="form-group">
                        <label>اسم المستخدم</label>
                        <input type="text" class="form-control" id="userNameField" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>الجنس</label>
                            <select class="form-control" id="gender">
                                <option value="">اختر الجنس</option>
                                <option value="ذكر">ذكر</option>
                                <option value="أنثى">أنثى</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>اسم الكلية</label>
                            <input type="text" class="form-control" id="facultyName">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>مستوى الدراسة</label>
                        <select class="form-control" id="levelOfStudy">
                            <option value="">اختر المستوى</option>
                            <option value="بكالوريوس">بكالوريوس</option>
                            <option value="ماجستير">ماجستير</option>
                            <option value="دكتوراه">دكتوراه</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>كلمة المرور الجديدة (اتركه فارغاً إذا لم ترد التغيير)</label>
                        <input type="password" class="form-control" id="password">
                    </div>
                    
                    <div class="form-group">
                        <label>تأكيد كلمة المرور</label>
                        <input type="password" class="form-control" id="confirmPassword">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" id="cancelProfile">إلغاء</button>
                <button class="btn btn-primary" id="saveProfile">حفظ التغييرات</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container main-content" id="mainContent"></div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <!-- SignalR JS -->
    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@7.0.0/dist/browser/signalr.min.js"></script>
    <script src="passenger/passenger.js"></script>
    <!--<script src="passenger/passengerMap.js"></script>-->
    <!-- Service Worker Registration -->
    <script src="sw-register.js"></script>
</body>